1. Server Prerequisites
    # Install Node.js and npm if not already installed
    curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
    apt-get install -y nodejs

    # Install PM2 globally
    npm install -g pm2

    # Install required Apache modules
    a2enmod headers
    a2enmod proxy
    a2enmod proxy_http
    a2enmod ssl
    a2enmod rewrite

2. Project Directory Setup
    # Create project directory
    mkdir -p /home/itcon/public_html/stremio
    cd /home/itcon/public_html/stremio

    # Initialize project
    npm init -y

    # Install required dependencies
    npm install stremio-addon-sdk @google/generative-ai

3. Project Files
    addon.js
    server.js
    ecosystem.config.js

4. Apache Configuration
    # /etc/apache2/sites-available/stremio.itcon.au.conf

5. Firewall Configuration
    # Allow port 7000
    iptables -A INPUT -p tcp --dport 7000 -j ACCEPT
    iptables -A OUTPUT -p tcp --sport 7000 -j ACCEPT

    # Save iptables rules
    iptables-save > /etc/iptables/rules.v4

6. Process Management
    # Start the addon
    pm2 start ecosystem.config.js

    # Save PM2 process list
    pm2 save

    # Enable PM2 startup script
    pm2 startup

    # Restart Apache
    systemctl restart apache2

7. Verification Steps
    # Check if Node.js server is running
    curl http://localhost:7000/manifest.json

    # Check if proxy is working
    curl https://stremio.itcon.au/aisearch/manifest.json

    # Check PM2 status
    pm2 list

    # Check Apache status
    systemctl status apache2

    # Check logs if needed
    pm2 logs stremio-aisearch
    tail -f /var/log/apache2/error.log

8. Maintenance Commands
    # Restart the addon
    pm2 restart stremio-aisearch

    # Update the addon
    git pull  # if using git
    pm2 reload stremio-aisearch

    # View logs
    pm2 logs stremio-aisearch

    # Monitor processes
    pm2 monit

9. Troubleshooting
    If port 7000 is in use:
    lsof -i :7000
    kill -9 $(lsof -t -i:7000)

    If Apache fails to start:
    apache2ctl -t
    systemctl status apache2

    Check Node.js server:
    netstat -tulpn | grep :7000

    The addon should be accessible at: https://stremio.itcon.au/aisearch/manifest.json

10. Reload after change to addon

# Stop all processes
pm2 stop all

# Delete all processes
pm2 delete all

# Kill any processes using port 7000
sudo lsof -t -i:7000 | xargs kill -9

# Start the server again
pm2 start ecosystem.config.js